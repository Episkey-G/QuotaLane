# QuotaLane Configuration Example
# This file demonstrates all available configuration options.
# Copy this file to config.yaml and customize for your environment.

# Server Configuration
server:
  http:
    # Network type (default: tcp)
    network: tcp
    # HTTP server listen address (default: :8080)
    addr: :8080
    # HTTP request timeout (default: 10m)
    timeout: 10m

  grpc:
    # Network type (default: tcp)
    network: tcp
    # gRPC server listen address (default: :9000)
    addr: :9000
    # gRPC request timeout (default: 10m)
    timeout: 10m

# Data Layer Configuration
data:
  # Database Configuration
  database:
    # Database driver (default: mysql)
    driver: mysql
    # Database connection string (REQUIRED - must be provided via environment variable)
    # Set via: MYSQL_DSN or CLAUDDY_DATA_DATABASE_SOURCE environment variable
    # Example: "user:password@tcp(localhost:3306)/quotalane?charset=utf8mb4&parseTime=True&loc=Local"
    source: ${MYSQL_DSN}

  # Redis Configuration
  redis:
    # Network type (default: tcp)
    network: tcp
    # Redis server address (default: 127.0.0.1:6379)
    addr: 127.0.0.1:6379
    # Redis read timeout (default: 0.2s)
    read_timeout: 0.2s
    # Redis write timeout (default: 0.2s)
    write_timeout: 0.2s

# Authentication & Security Configuration
auth:
  # JWT Configuration
  jwt:
    # JWT signing secret (REQUIRED - must be provided via environment variable)
    # Set via: JWT_SECRET or CLAUDDY_AUTH_JWT_SECRET environment variable
    # Should be a strong random string (minimum 32 characters recommended)
    secret: ${JWT_SECRET}
    # JWT token expiration time (default: 24h)
    expires: 24h

  # Encryption Configuration
  encryption:
    # Encryption key for sensitive data (REQUIRED - must be provided via environment variable)
    # Set via: ENCRYPTION_KEY or CLAUDDY_AUTH_ENCRYPTION_KEY environment variable
    # Must be exactly 32 characters for AES-256 encryption
    key: ${ENCRYPTION_KEY}

# Logging Configuration
log:
  # Log level: debug, info, warn, error (default: info)
  level: info
  # Log format: json, text (default: json)
  format: json

# Environment Variable Usage:
# ---------------------------
# All configuration values can be overridden using environment variables with CLAUDDY_ prefix.
#
# Examples:
#   CLAUDDY_SERVER_HTTP_ADDR=:8888
#   CLAUDDY_DATA_REDIS_ADDR=redis.example.com:6379
#   CLAUDDY_LOG_LEVEL=debug
#
# Required Environment Variables:
#   MYSQL_DSN                       - Database connection string
#   JWT_SECRET                      - JWT signing secret
#   ENCRYPTION_KEY                  - Data encryption key (32 characters)
#
# Configuration Priority:
#   CLI flags > Environment variables > Config file > Default values
#
# CLI Usage:
#   ./QuotaLane -conf /path/to/config.yaml
#   ./QuotaLane -conf config.prod.yaml
